!function(a,i){var n,o=a("#payment-detail-modal"),s=(UR_Snackbar&&(n=new UR_Snackbar),{append_spinner:function(e){return!(!e||!e.append||(e.append('<span class="ur-spinner is-active"></span>'),0))},handle_bulk_delete_action:function(o){Swal.fire({title:'<img src="'+i.delete_icon+'" id="delete-user-icon">'+i.labels.i18n_prompt_title,html:'<p id="html_1">'+i.labels.i18n_prompt_bulk_subtitle+"</p>",showCancelButton:!0,confirmButtonText:i.labels.i18n_prompt_delete,cancelButtonText:i.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(e){var n,t;e.isConfirmed&&(n=o.find("input[type=checkbox]:checked"),t=[],n.length<=1?s.show_failure_message(i.labels.i18n_prompt_no_order_selected):(n.each(function(e){0!==e&&t.push(a(this).val())}),s.send_data({action:"user_registration_membership_delete_orders",order_ids:JSON.stringify(t)},{success:function(e){e.success?(a(".ur-member-save-btn").text("Save"),s.show_success_message(e.data.message),s.remove_deleted_orders(n,!0)):s.show_failure_message(e.data.message)},failure:function(e,n){s.show_failure_message(i.labels.network_error+"("+n+")")},complete:function(){window.location.reload()}})))})},handle_single_delete_action:function(n){var t=n.data("order-id");Swal.fire({title:'<img src="'+i.delete_icon+'" id="delete-user-icon">'+i.labels.i18n_prompt_title,html:'<p id="html_1">'+i.labels.i18n_prompt_single_subtitle+"</p>",showCancelButton:!0,confirmButtonText:i.labels.i18n_prompt_delete,cancelButtonText:i.labels.i18n_prompt_cancel,allowOutsideClick:!1}).then(function(e){e.isConfirmed&&s.send_data({action:"user_registration_membership_delete_order",order_id:t},{success:function(e){e.success?(s.show_success_message(e.data.message),s.remove_deleted_orders(n,!1)):s.show_failure_message(e.data.message)},failure:function(e,n){s.show_failure_message(i.labels.network_error+"("+n+")")},complete:function(){window.location.reload()}})})},send_data:function(e,n){var t="function"==typeof n.success?n.success:function(){},o="function"==typeof n.failure?n.failure:function(){},s="function"==typeof n.beforeSend?n.beforeSend:function(){},n="function"==typeof n.complete?n.complete:function(){};!e._wpnonce&&i&&(e._wpnonce=i._nonce),a.ajax({type:"post",dataType:"json",url:i.ajax_url,data:e,beforeSend:s,success:t,error:o,complete:n})},show_success_message:function(e){return!!n&&(n.add({type:"success",message:e,duration:5}),!0)},show_failure_message:function(e){return!!n&&(n.add({type:"failure",message:e,duration:6}),!0)},remove_deleted_orders:function(e,n){n?e.each(function(e){0!==e&&a(this).parents("tr").remove()}):a(e).parents("tr").remove()},open_modal:function(){this.clear_modal(),o.css({display:"flex"})},close_modal:function(){o.css({display:"none"})},clear_modal:function(){o.find(".modal-body").empty()}});a(document).ready(function(){a("#doaction-orders").on("click",function(e){e.preventDefault(),e.stopPropagation();e=a("#ur-membership-payment-history-form");"delete"===e.find("select#bulk-action-selector-top option:selected").val()&&s.handle_bulk_delete_action(e)}),a(".single-delete-order").on("click",function(){s.handle_single_delete_action(a(this))}),a(document).on("click",".show-order-detail",function(){var e=a(this).data("order-id"),t=o.find(".modal-body");s.open_modal(),s.append_spinner(t),s.send_data({action:"user_registration_membership_show_order_detail",order_id:e},{success:function(e){var n;e.success?(n=JSON.parse(e.data),t.html(n)):s.show_failure_message(e.data.message)},failure:function(e,n){console.log(e),s.show_failure_message(i.labels.network_error+"("+n+")")},complete:function(){}})}),a(window).click(function(e){a(e.target).is(o)&&s.close_modal()}),a(document).on("click",".close-button",function(){s.close_modal()})})}(jQuery,window.urm_orders_localized_data);