!function(u){var e=u(".ur-frontend-form form"),s="",a=(e.hasClass("edit-profile")&&(s="user_registration_"),{$user_registration:e,init:function(){this.add_validation_methods(),this.load_validation(),this.init_inputMask(),this.init_tooltipster(),this.$user_registration.on("input validate change",".input-text, select, input:checkbox input:radio",this.validate_field),u("[type='number']").keypress(function(e){var a=e.keyCode;(a<48||57<a)&&e.preventDefault()})},init_inputMask:function(){"undefined"!=typeof u.fn.inputmask&&u(".ur-masked-input").inputmask()},init_tooltipster:function(){var e;"undefined"!=typeof tooltipster&&(e={theme:"tooltipster-borderless",maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,functionInit:function(e,a){a=jQuery(a.origin).attr("data-tip");a&&e.content(a)}},u(".user-registration-help-tip").tooltipster(e))},add_validation_methods:function(){u.validator.methods.email=function(e,a){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(a)||t.test(e)},u.validator.addMethod("lengthValidator",function(e,a,t){return e.length<=t},u.validator.format("Please enter less than {0} characters.")),u.validator.addMethod("SpecialCharacterValidator",function(e,a){var t=new RegExp(/^(?=.{3,20}$)[a-zA-Z][a-zA-Z0-9_.]*(?: [a-zA-Z0-9]+)*$/);return this.optional(a)||t.test(e)},user_registration_params.message_username_character_fields),u.validator.addMethod("checkLimit",function(e,a,t){var t=parseInt(t||0,10),i="";return u(a).closest(".field-checkbox").length?i=u(a).closest("ul").find('input[type="checkbox"]:checked'):u(a).closest(".field-multi_select2").length?i=u(a).val():u(a).closest(".field-multiple_choice").length&&(i=u(a).closest("ul").find('input[type="checkbox"]:checked')),0===t||i.length<=t},u.validator.format("Please select no more than {0} options."))},load_validation:function(){if("undefined"==typeof u.fn.validate)return!1;var t=this;t.$user_registration.each(function(){var e=u(this),a=t.custom_validation(e);t.custom_validation_messages(),e.validate({errorClass:"user-registration-error",validClass:"user-registration-valid",rules:a.rules,messages:a.messages,focusInvalid:!1,invalidHandler:function(e,a){a.numberOfInvalids()&&u(window).scrollTop(u(a.errorList[0].element).offset().top)},errorPlacement:function(e,a){var t;a.is("#password_2")?a.parent().after(e):"radio"===a.attr("type")||"checkbox"===a.attr("type")||"password"===a.attr("type")?a.parent().parent().parent().append(e):a.is("select")&&a.attr("class").match(/date-month|date-day|date-year/)?0===a.parent().find("label.user-registration-error:visible").length&&a.parent().find("select:last").after(e):a.hasClass("ur-smart-phone-field")?((t=a.closest("p.form-row")).find("#"+a.data("id")+"-error").remove(),t.append(e)):"number"===a.attr("type")&&a.hasClass("ur-range-input")?e.insertAfter(a.closest(".ur-range-row").find(".ur-range-number")):(u(document).trigger("user-registration-append-error-messages",a),!a.hasClass("urfu-file-input")&&!a.closest(".field-multi_select2").length&&"number"===a.attr("type")&&a.hasClass("ur-quantity")?e.insertAfter(a.parent()):e.insertAfter(a.parent().parent()))},highlight:function(e,a,t){e=u(e);e.closest(".form-row"),e.attr("name")},unhighlight:function(e,a,t){var e=u(e),i=e.closest(".form-row"),r=e.attr("name");("radio"===e.attr("type")||"checkbox"===e.attr("type")?i.find("input[name='"+r+"']"):e).addClass(t).removeClass(a),i.removeClass("user-registration-has-error")},submitHandler:function(e){return!(u(e).hasClass("register")||u(e).hasClass("edit-profile")&&"yes"===user_registration_params.ajax_submission_on_edit_profile)}})})},validate_field:function(e){u.extend(u.validator.messages,{required:user_registration_params.message_required_fields,url:user_registration_params.message_url_fields,email:user_registration_params.message_email_fields,number:user_registration_params.message_number_fields,confirmpassword:user_registration_params.message_confirm_password_fields});var a=u(this),t=a.closest(".form-row"),i=!0,r=t.is(".validate-required"),s=t.is(".validate-email"),e=e.type;"input"===e&&t.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email user-registration-validated"),"validate"!==e&&"change"!==e||(r&&("checkbox"===a.attr("type")&&!a.is(":checked")||""===a.val())&&(t.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-required-field"),i=!1),s&&a.val()&&!new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a.val())&&(t.removeClass("user-registration-validated").addClass("user-registration-invalid user-registration-invalid-email"),i=!1),i&&t.removeClass("user-registration-invalid user-registration-invalid-required-field user-registration-invalid-email").addClass("user-registration-validated"))},custom_validation:function(e){var a={},t={},i=(e.find("#user_confirm_email").length&&(i=e.closest(".ur-frontend-form").attr("id"),a.user_confirm_email={equalTo:"#"+i+" #user_email"},t.user_confirm_email=user_registration_params.message_confirm_email_fields),e.hasClass("edit-password")?(a.password_2={equalTo:"#password_1"},t.password_2=user_registration_params.message_confirm_password_fields):e.hasClass("register")&&e.find("#user_confirm_password").length&&(i=e.closest(".ur-frontend-form").attr("id"),a.user_confirm_password={equalTo:"#"+i+" #user_pass"},t.user_confirm_password=user_registration_params.message_confirm_password_fields),e.find("#user_login")),r={},i=(i.length&&void 0!==i.data("username-length")&&(r.lengthValidator=i.data("username-length")),"no"==i.data("username-character")&&(r.SpecialCharacterValidator=i.data("username-character")),a.user_login=r,e.find(".field-checkbox")),r=e.find(".field-multi_select2"),e=e.find(".field-multiple_choice");return i.length&&i.each(function(){a[s+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("ul").data("choice-limit")?u(this).find("ul").data("choice-limit"):0}}),r.length&&r.each(function(){a[s+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("select").data("choice-limit")?u(this).find("select").data("choice-limit"):0}}),e.length&&e.each(function(){a[s+u(this).data("field-id")+"[]"]={checkLimit:u(this).find("ul").data("choice-limit")?u(this).find("ul").data("choice-limit"):0}}),{rules:a,messages:t}},custom_validation_messages:function(){u.validator.messages.required=user_registration_params.message_required_fields,u.validator.messages.url=user_registration_params.message_url_fields,u.validator.messages.email=user_registration_params.message_email_fields,u.validator.messages.number=user_registration_params.message_number_fields,u.validator.messages.confirmpassword=user_registration_params.message_confirm_password_fields,u.validator.messages.max=function(e,a){return user_registration_params.message_confirm_number_field_max.replace("%qty%",a.max)},u.validator.messages.min=function(e,a){return user_registration_params.message_confirm_number_field_min.replace("%qty%",a.min)},u.validator.messages.step=function(e,a){return user_registration_params.message_confirm_number_field_step.replace("%qty%",a.step)}}});u(window).on("load",function(){a.init()})}(jQuery);