jQuery(function(i){var r={init:function(){this.init_event()},profile_picture_upload:function(e){var r=user_registration_params.ajax_url+"?action=user_registration_profile_pic_upload&security="+user_registration_params.user_registration_profile_picture_upload_nonce,t=new FormData,o=e,a=(t.append("file",o[0].files[0]),o.closest(".button-group").find(".user_registration_profile_picture_upload")),n=a.text();i.ajax({url:r,data:t,type:"POST",processData:!1,contentType:!1,beforeSend:function(){a.text(user_registration_params.user_registration_profile_picture_uploading)},complete:function(e){var r,t,i="",e=(o.val(""),JSON.parse(e.responseText)),i=e.data.message;e.success||(i='<p class="uraf-profile-picture-error user-registration-error">'+i+"</p>"),e.success&&(i="",r=e.data.url,t=e.data.attachment_id,o.closest(".button-group").find("#profile_pic_url").val(t),o.closest(".user-registration-profile-header").find(".profile-preview").attr("src",r)),o.closest(".button-group").find(".profile-pic-remove").data("attachment-id",e.data.attachment_id),o.closest(".button-group").find(".profile-pic-remove").prop("style",!1),o.closest(".button-group").find(".user_registration_profile_picture_upload").attr("style","display:none"),o.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove(),o.closest(".button-group").after('<span class="user-registration-profile-picture-error">'+i+"</span>"),a.text(n)}})},init_event:function(){i(".user_registration_profile_picture_upload").on("click",function(){i(this).closest(".button-group").find('input[type="file"]').trigger("click")}),i(document).on("change",'.button-group input[type="file"]',function(){r.profile_picture_upload(i('.button-group input[type="file"]'))})},remove_avatar:function(r){var e=user_registration_params.ajax_url+"?action=user_registration_profile_pic_remove&security="+user_registration_params.user_registration_profile_picture_remove_nonce;i.ajax({url:e,type:"POST",data:{attachment_id:r.data("attachment-id")},success:function(e){e.success&&(e=r.closest("form").find('input[name="profile-pic"]'),input_hidden=r.closest("form").find('input[name="profile-pic-url"]'),profile_default_input_hidden=r.closest("form").find('input[name="profile-default-image"]'),preview=r.closest("form").find("img.profile-preview"),input_hidden.val(""),preview.attr("src",profile_default_input_hidden.val()),r.hide(),"yes"===user_registration_params.ajax_submission_on_edit_profile?(r.closest(".button-group").find(".user_registration_profile_picture_upload").show(),r.closest(".user-registration-profile-header").find(".user-registration-profile-picture-error").remove()):e.val("").show())}})}};i(".profile-pic-remove").on("click",function(e){e.preventDefault(),r.remove_avatar(i(this))}),i(".ur-frontend-form").find(".user-registration-profile-header").find(".uraf-profile-picture-upload").length||(i(".ur-frontend-form").find("form.edit-profile").hasClass("user-registration-EditProfileForm")&&"yes"===user_registration_params.ajax_submission_on_edit_profile?r.init():i(".edit-profile").on("submit",function(e){var r,t=i(".ur-smart-phone-field");if("true"===t.attr("aria-invalid"))return e.preventDefault(),(e=t.closest("p.form-row")).find("#"+t.data("id")+"-error").remove(),r='<label id="'+t.data("id")+'-error" class="user-registration-error" for="'+t.data("id")+'">'+user_registration_params.message_validate_phone_number+"</label>",e.append(r),e.find("#"+t.data("id")).attr("aria-invalid",!0),!0})),i("input.flatpickr-input").each(function(){i(this).val(i(this).attr("value"))})});